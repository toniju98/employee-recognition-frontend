import{j as e,T as b,J as T,b as f,h as u,O as R,a9 as S,a1 as w,aa as E,ab as W,ac as v,ad as t,ae as I,g as D,D as A,s as V,t as M,w as C,F as P,x as k,y as F,d as p,G as N}from"./mui-253f51e6.js";import{r as l}from"./vendor-e1e3bd03.js";import{a as y}from"./index-7063af5f.js";import"./router-2d7623d0.js";import"./auth-01303d9d.js";import"./utils-ef1a3bf2.js";function O(){const[d,c]=l.useState([]),[x,h]=l.useState(!0),[g,m]=l.useState(null),n=async()=>{try{const{data:o}=await y.get("/admin/recognition-types");c(o)}catch(o){m(o instanceof Error?o:new Error("Failed to fetch recognition types"))}finally{h(!1)}},a=async o=>{try{const{data:r}=await y.post("/admin/recognition-types",o);return c([...d,r]),!0}catch(r){return console.error("Failed to create recognition type:",r),!1}},i=async(o,r)=>{try{const{data:s}=await y.patch(`/admin/recognition-types/${o}`,r);return c(d.map(j=>j._id===o?s:j)),!0}catch(s){return console.error("Failed to update recognition type:",s),!1}};return l.useEffect(()=>{n()},[]),{types:d,loading:x,error:g,createType:a,updateType:i,refreshTypes:n}}function G(){const{types:d,loading:c,error:x,createType:h,updateType:g}=O(),[m,n]=l.useState(!1),[a,i]=l.useState({name:"",category:"",pointValue:0,active:!0}),o=async r=>{r.preventDefault(),await h(a)&&(n(!1),i({name:"",category:"",pointValue:0,active:!0}))};return c?e.jsx(b,{children:"Loading..."}):x?e.jsx(b,{color:"error",children:x.message}):e.jsxs(T,{maxWidth:"lg",sx:{py:4},children:[e.jsx(f,{sx:{mb:4,background:"linear-gradient(90deg, #1976d2 0%, #1565c0 100%)",p:3,borderRadius:2,color:"white",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:e.jsx(b,{variant:"h4",component:"h1",sx:{fontWeight:600,mb:1},children:"Recognition Types"})}),e.jsx(f,{sx:{display:"flex",justifyContent:"flex-end",mb:3},children:e.jsx(u,{variant:"contained",startIcon:e.jsx(R,{}),onClick:()=>n(!0),sx:{borderRadius:2,textTransform:"none",px:3,py:1,fontWeight:600,boxShadow:"none","&:hover":{boxShadow:"0 4px 12px rgba(0,0,0,0.15)"}},children:"Add Recognition Type"})}),e.jsx(S,{component:w,sx:{borderRadius:2,boxShadow:"0 4px 12px rgba(0,0,0,0.05)","& .MuiTableCell-root":{borderColor:"divider"}},children:e.jsxs(E,{children:[e.jsx(W,{children:e.jsxs(v,{sx:{backgroundColor:"primary.light","& .MuiTableCell-root":{color:"white",fontWeight:600}},children:[e.jsx(t,{children:"Name"}),e.jsx(t,{children:"Category"}),e.jsx(t,{children:"Point Value"}),e.jsx(t,{align:"right",children:"Actions"})]})}),e.jsx(I,{children:d.map(r=>e.jsxs(v,{hover:!0,children:[e.jsx(t,{children:r.name}),e.jsx(t,{children:e.jsx(D,{label:r.category.replace("_"," ").toLowerCase(),size:"small",sx:{borderRadius:2,backgroundColor:s=>`${s.palette.primary.main}08`,color:"primary.main",fontWeight:500}})}),e.jsx(t,{children:r.pointValue}),e.jsx(t,{align:"right",children:e.jsx(u,{variant:"outlined",size:"small",onClick:()=>g(r._id,{active:!r.active}),sx:{borderRadius:2,textTransform:"none",fontWeight:500},children:r.active?"Deactivate":"Activate"})})]},r._id))})]})}),e.jsx(A,{open:m,onClose:()=>n(!1),PaperProps:{sx:{borderRadius:2,boxShadow:"0 8px 32px rgba(0,0,0,0.1)"}},children:e.jsxs("form",{onSubmit:o,children:[e.jsx(V,{sx:{pb:1,borderBottom:"1px solid",borderColor:"divider","& .MuiTypography-root":{fontSize:"1.5rem",fontWeight:600,color:"primary.main"}},children:"Add Recognition Type"}),e.jsx(M,{sx:{pt:3},children:e.jsxs(f,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsx(C,{label:"Name",value:a.name,onChange:r=>i({...a,name:r.target.value}),required:!0,fullWidth:!0,InputProps:{sx:{borderRadius:2,"& fieldset":{borderColor:"divider"},"&:hover fieldset":{borderColor:"primary.main"}}}}),e.jsxs(P,{required:!0,fullWidth:!0,children:[e.jsx(k,{children:"Category"}),e.jsxs(F,{value:a.category,label:"Category",onChange:r=>i({...a,category:r.target.value}),sx:{borderRadius:2,"& fieldset":{borderColor:"divider"},"&:hover fieldset":{borderColor:"primary.main"}},children:[e.jsx(p,{value:"TEAMWORK",children:"Teamwork"}),e.jsx(p,{value:"INNOVATION",children:"Innovation"}),e.jsx(p,{value:"EXCELLENCE",children:"Excellence"}),e.jsx(p,{value:"CUSTOMER_SERVICE",children:"Customer Service"})]})]}),e.jsx(C,{type:"number",label:"Point Value",value:a.pointValue,onChange:r=>i({...a,pointValue:Number(r.target.value)}),required:!0,fullWidth:!0,InputProps:{sx:{borderRadius:2,"& fieldset":{borderColor:"divider"},"&:hover fieldset":{borderColor:"primary.main"}}}})]})}),e.jsxs(N,{sx:{px:3,py:2,borderTop:"1px solid",borderColor:"divider"},children:[e.jsx(u,{onClick:()=>n(!1),variant:"outlined",sx:{borderRadius:2,textTransform:"none",fontWeight:500},children:"Cancel"}),e.jsx(u,{type:"submit",variant:"contained",sx:{borderRadius:2,textTransform:"none",fontWeight:500,boxShadow:"none","&:hover":{boxShadow:"0 4px 12px rgba(0,0,0,0.15)"}},children:"Add"})]})]})})]})}export{G as default};
